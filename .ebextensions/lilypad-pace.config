container_commands:
  01_syncdb:
    command: "django-admin.py syncdb --noinput"
    leader_only: true

  02_migrate:
    command: "django-admin.py migrate"
    leader_only: true

  03_createadmin:
    command: "scripts/createadmin.py"
    leader_only: true

  04_collectstatic:
    command: "django-admin.py collectstatic --noinput"


option_settings:
  "aws:elasticbeanstalk:container:python":
    WSGIPath: "server/lilypad_server/wsgi.py"

  "aws:elasticbeanstalk:container:python:staticfiles":
    "/static/": "client/"

  "aws:elasticbeanstalk:application:environment":
    DJANGO_SETTINGS_MODULE: "lilypad_server.settings.production_aws"
    PYTHONPATH: "server/"

# Notes:
# - don't forget to set the SECRET_KEY in the .elasticbeanstalk/optionsttings.* file
# - also be sure to delete any reference to DJANGO_SETTINGS_MODULE in that file
# - after deploying for the first time, be sure to change the default superuser password set up in createadmin.py
